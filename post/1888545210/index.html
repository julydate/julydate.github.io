<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/favicon.ico"><link rel="icon" type="image/png" href="/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="author" content="七夏浅笑"><meta name="description" content="几天前 Google Cloud 推出了免费的公共 SSL 证书，网上也出现了不少教程，看了下都是关于 certbot 的，本来也不想折腾，顺手填了个申请表，没想到今天申请通过了，然后看了下 acme.sh 脚本的文档那边居然几天前就更新并支持了 Google，然后就又顺手申请了一下，这就记录一下。"><meta name="keywords" content="笔记,证书,ssl,https,acme,acme.sh,证书申请,Google,CA,"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><title>使用 acme.sh 申请 Google Cloud SSL 证书 - 七夏浅笑</title><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"><link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css"><link rel="stylesheet" href="/lib/prettify/tranquil-heart.min.css"><link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"><link rel="stylesheet" href="/css/main.css"><script src="/lib/jquery/jquery.min.js"></script><style type="text/css">.banner-bg{background-image:url(//julydate-1251438221.file.myqcloud.com/img/bg.jpg);background-position:center;background-repeat:repeat-y;background-size:cover;background-attachment:fixed}</style><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="七夏浅笑" type="application/atom+xml">
</head><body class="banner-bg"><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>七夏浅笑</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/">主页</a></li><li class="nav-item"><a class="nav-link" href="/archives/">归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/">分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li><li class="nav-item"><a class="nav-link" href="/links/">友链</a></li><li class="nav-item"><a class="nav-link" href="/about/">关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i class="iconfont icon-search"></i>&nbsp;&nbsp;</a></li></ul></div></div></nav><div class="view intro-2 rgba-black-slight" id="background"><div class="full-bg-img"><div class="mask flex-center"><div class="container text-center white-text fadeInUp"><span class="h2" id="subtitle"></span><br><p class="mt-3"><i class="far fa-calendar-alt"></i> <span class="post-date">2022-04-04&nbsp;|&nbsp;</span> <i class="far fa-chart-bar"></i> <span class="post-count">1.2k</span>字&nbsp;|&nbsp; <i class="far fa-clock"></i> <span class="post-count">5</span>分钟</p></div></div></div></div></header><main id="mainContent" class="rgba-black-slight"><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="py-5 z-depth-3" id="board"><div class="post-content mx-auto" id="post"><div class="markdown-body"><p>几天前 Google Cloud 推出了免费的公共 SSL 证书，网上也出现了不少教程，看了下都是关于 certbot 的，本来也不想折腾，顺手填了个申请表，没想到今天申请通过了，然后看了下 acme.sh 脚本的文档那边居然几天前就更新并支持了 Google，然后就又顺手申请了一下，这就记录一下。</p><span id="more"></span><p>Google 那边的原文：《<a target="_blank" href="https://cloud.google.com/blog/products/identity-security/automate-public-certificate-lifecycle-management-via--acme-client-api" rel="external nofollow noreferrer noopener">Automate Public Certificates Lifecycle Management via RFC 8555 (ACME)</a>》</p><blockquote><p>我们很高兴地宣布对我们的证书管理器预览版进行了增强，它允许 Google Cloud 客户为他们的工作负载获取公共证书，从而直接终止 TLS，或者为他们的跨云和本地工作负载获取公共证书。这是通过自动证书管理环境（ACME）协议实现的，该协议与证书颁发机构用来实现 TLS 证书的无缝自动生命周期管理的协议相同。</p><p>这些证书来自 Google Trust Services，当我们代表您使用全球外部 HTTPS 负载均衡器管理证书时，默认情况下使用相同的证书颁发机构（CA）。通过对托管证书和非托管证书使用相同的 CA，您可以确保这两种方案在使用您的服务的所有设备上都能同样好地工作。</p><p>这也使云客户能够获得更可靠的 TLS 部署。为此，它允许使用一个基于 ACME 的通用证书生命周期管理案例，而不会出现单点故障(仅依赖于一个证书颁发机构)。换句话说，现在可以放心地自由负载平衡或故障转移到多个 ACME CA。</p></blockquote><p>当然是机翻的，将就看看吧（</p><p>反正和 Let’s Encrypt 差不多，而且还支持 IP 地址证书，不过好像还不支持特殊格式的那种域名，比如 emoji 的那种？另外 ECC 证书不是全链 ECC。总之用来尝鲜啦~</p><h2 id="申请测试资格"><a href="#申请测试资格" class="headerlink" title="申请测试资格"></a>申请测试资格</h2><p>首先需要一个 GCP 账号，在 <a target="_blank" href="https://cloud.google.com/" rel="external nofollow noreferrer noopener">https://cloud.google.com/</a> 可以注册。</p><p>然后去<a target="_blank" href="https://console.cloud.google.com/home/dashboard" rel="external nofollow noreferrer noopener">控制台</a>，查看你的项目 ID（图中选中的位置）。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20220404195648594.png" srcset="/img/loading.gif" alt="image-20220404195648594"></p><p>有了账户之后去填申请表单。</p><p><a target="_blank" href="https://docs.google.com/forms/d/1Euhflb5CXpuLik8czElhyAloTZJZobar4086dmlPqXA/viewform?ts=620a6854" rel="external nofollow noreferrer noopener">https://docs.google.com/forms/d/1Euhflb5CXpuLik8czElhyAloTZJZobar4086dmlPqXA/viewform?ts=620a6854</a></p><p>填上你的电子邮件和你的项目 ID，等待咕咕给你发邮件，拿到这封邮件说明你已经成功通过了试炼，成为了下一任咳咳…下一位 Google Cloud Public Certificate 的使用者。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20220404200828984.png" srcset="/img/loading.gif" alt="image-20220404200828984"></p><h2 id="注册测试账户"><a href="#注册测试账户" class="headerlink" title="注册测试账户"></a>注册测试账户</h2><p>去这个网页点击 Enable 开启 API 权限</p><p><a target="_blank" href="https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=" rel="external nofollow noreferrer noopener">https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=</a>你的项目 ID</p><p>等圈圈转完并且显示<code>API Enabled</code>，然后打开 GCP 的<a target="_blank" href="https://shell.cloud.google.com/" rel="external nofollow noreferrer noopener">命令行控制台</a>输入</p><pre><code class="shell">gcloud beta publicca external-account-keys create
</code></pre><p>弹窗允许，然后得到以下内容</p><pre><code class="shell">Created an external account key
[b64MacKey: uAxSvJYW2Q9B_wd8VnDj7PbZMestCINXri35gkGypqF64a0lKfzhTLHEOo1RUcm
keyId: 3c6c432adc08439392a990bcf93f76b5]
</code></pre><h2 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h2><p>这一部分参考的我之前的教程的哦，使用 acme.sh 脚本。</p><h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><pre><code class="shell"># Debian/Ubuntu
apt-get install openssl cron socat curl -y
apt-get update ca-certificates
systemctl enable cron
systemctl start cron

# CentOS
yum -q -y install openssl crontabs socat curl
yum update ca-certificates
systemctl enable crond
systemctl start crond
</code></pre><h3 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h3><pre><code class="shell"># 创建工作目录
mkdir -p /home/acme

# 安装 acme.sh 脚本
curl https://get.acme.sh | sh
source ~/.bashrc
source ~/.bash_profile
acme.sh  --upgrade  --auto-upgrade --log  &quot;/home/acme/acme.log&quot;
</code></pre><h3 id="签发证书"><a href="#签发证书" class="headerlink" title="签发证书"></a>签发证书</h3><p>这里还是以 CloudFlare 为例，<code>admin@example.com</code> 改为你的邮箱，<code>--eab-kid</code> 后面填写之前申请到的 <code>keyId</code>，而 <code>--eab-kid</code> 后面填写之前申请到的<code>b64MacKey</code></p><pre><code class="shell"># 定义临时变量
# example.com 修改成你的域名
export DOMAIN=&quot;example.com&quot;
# 下面的内容根据所使用的 DNS 服务商更改
export CF_Key=&quot;b8e8fff91ff445a1a238fc080797910b&quot;
export CF_Email=&quot;admin@example.com&quot;

# 注册账户
acme.sh --register-account --server google \
-m &quot;admin@example.com&quot; \
--eab-kid &quot;xxxxxxx&quot; \
--eab-hmac-key &quot;xxxxxxx&quot;
    
# 签发证书
mkdir -p /home/acme/$&#123;DOMAIN&#125;
acme.sh --issue --server google --dns dns_cf -d $&#123;DOMAIN&#125; -d *.$&#123;DOMAIN&#125;


# 移动证书
acme.sh --install-cert -d $&#123;DOMAIN&#125; \
--cert-file      /home/acme/$&#123;DOMAIN&#125;/cert.pem  \
--key-file       /home/acme/$&#123;DOMAIN&#125;/key.pem  \
--fullchain-file /home/acme/$&#123;DOMAIN&#125;/fullchain.pem \
--reloadcmd     &quot;echo \$(date -d \&quot;\$current\&quot; +%s) &gt; /home/acme/$&#123;DOMAIN&#125;/time.log&quot;
</code></pre><p>成功之后证书在 <code>/home/acme</code> 目录下。除了签发证书里 <code>register-account</code> 这一部分，其它基本和之前一样。</p><h2 id="证书信任问题"><a href="#证书信任问题" class="headerlink" title="证书信任问题"></a>证书信任问题</h2><p>全部完成之后我在本地打开了证书，结果一看证书链没有信任，但是单独打开上一级证书和根证书，都是正常的，也不知道为什么。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20220404213646822.png" srcset="/img/loading.gif" alt="image-20220404213646822"></p><p>所以去下了一个<a target="_blank" href="https://crt.sh/?d=3233315903" rel="external nofollow noreferrer noopener">根证书</a>打开之后重新在电脑上安装了一下终于好了，不知道其它电脑会不会也有问题，所以在想放正式环境上用的话还是在过段时间吧。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20220404215142811.png" srcset="/img/loading.gif" alt="image-20220404215142811"></p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20220404214036974.png" srcset="/img/loading.gif" alt="image-20220404214036974"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>水的文章要什么总结嘛。感谢咕咕提供的免费证书~大切にします！</p><p>参考</p><p>《<a target="_blank" href="https://github.com/acmesh-official/acme.sh/wiki/Google-Public-CA" rel="external nofollow noreferrer noopener">acme.sh wiki</a>》</p><p>《<a target="_blank" href="https://hostloc.com/thread-993780-1-1.html" rel="external nofollow noreferrer noopener">使用 GCP 公共 CA 签发证书初体验</a>》</p><p>《<a target="_blank" href="https://cloud.google.com/public-certificate-authority/docs/quickstart" rel="external nofollow noreferrer noopener">Request certificates using Public Certificate Authority</a>》</p><hr></div><br><div><div id="post-tag"><span><i class="iconfont icon-inbox"></i> <a class="hover-with-bg" href="/categories/%E7%A8%8B%E5%BA%8F">程序</a> &nbsp; </span><span><i class="iconfont icon-tag"></i> <a class="hover-with-bg" href="/tags/%E7%AC%94%E8%AE%B0">笔记</a> <a class="hover-with-bg" href="/tags/%E8%AF%81%E4%B9%A6">证书</a> <a class="hover-with-bg" href="/tags/ssl">ssl</a> <a class="hover-with-bg" href="/tags/https">https</a> <a class="hover-with-bg" href="/tags/acme">acme</a> <a class="hover-with-bg" href="/tags/acme-sh">acme.sh</a> <a class="hover-with-bg" href="/tags/%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7">证书申请</a> <a class="hover-with-bg" href="/tags/Google">Google</a> <a class="hover-with-bg" href="/tags/CA">CA</a></span></div><div id="post-note"><div><strong>本文作者：</strong><a href="/">七夏浅笑</a></div><div><strong>本文链接：</strong><a href="https://www.julydate.com/post/1888545210/">https://www.julydate.com/post/1888545210/</a></div><div><strong>版权声明：</strong>本站文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0/deed.zh" rel="nofollow noopener noopener">CC BY-NC-SA 3.0 CN</a> 协议进行许可</div></div><div id="post-nav" class="container"><div class="row"><a href="/post/3222774001/" id="post-nav-prev" class="col"><i class="fas fa-arrow-left"></i> <span class="post-nav-title">博客禁止大陆访问</span> </a><a href="/post/3278826680/" id="post-nav-next" class="col"><span class="post-nav-title">前端跨域问题及解决方案</span> <i class="fas fa-arrow-right"></i></a></div></div></div></div><div class="col-lg-10 mx-auto nopadding-md"><div class="comments mx-auto" id="comments"><br><br><link rel="stylesheet" href="/lib/waline/2.15.6/waline.min.css"><style type="text/css">.wl-[data-class=wl-] .wl-content>p>a:not(.at){overflow-wrap:anywhere;display:inline}</style><div id="vcomments" style="margin:0 auto"></div><script defer src="/lib/waline/2.15.6/waline.min.js"></script><script>var notify=!1,verify=!1,oldLoad=window.onload;window.onload=function(){function e(e){const t=new FormData;return t.append("image",e),t.append("apiType","catbox"),t.append("token","146faa57355f01c8eed8a045eda6a684"),fetch("//www.hualigs.cn/api/upload",{method:"POST",mode:"cors",body:t}).then(e=>e.json()).then((function(e){const t=new RegExp("^[a-zA-z]+://[^s]*");let a=e.data.url.catbox;return t.test(a)?a:e.data.url[2]}))}Waline.init({el:"#vcomments",serverURL:"https://waline.julydate.com",meta:["nick","mail","link"],pageSize:"10",emoji:["https://www.julydate.com/waline-emojis/alus","https://www.julydate.com/waline-emojis/qq","https://www.julydate.com/waline-emojis/bilibili"],locale:{placeholder:"说点什么吧quq",uploading:"上传中...默认图床在境内可能无法访问"},imageUploader:function(t){return function(t){const a=new FormData;return a.append("smfile",t),a.append("format","json"),fetch("https://smms.xhtml.love/upload",{method:"POST",mode:"cors",headers:new Headers({Authorization:"FNnpntzeJnw1SQc61jL6Tt1UZPzmhLBT"}),body:a}).then(e=>e.json()).then((function(a){const n=new RegExp("^[a-zA-z]+://[^s]*");let o="image_repeated"==a.code?a.images:a.data.url?a.data.url:"";return n.test(o)?o:e(t)})).catch((function(a){return e(t)}))}(t)}}),oldLoad&&oldLoad()}</script><noscript>Please enable JavaScript to view the <a target="_blank" href="https://waline.js.org" rel="nofollow noopener noopener">comments powered by Waline.</a></noscript></div></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container"><div id="toc"><p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p><div id="tocbot"></div></div></div></div></div></main><div id="sidebar" class="sidebar-hide"><span class="sidebar-button sidebar-button-shift" id="toggle-sidebar"><i class="fa fa-arrow-right on" aria-hidden="true"></i></span><div class="sidebar-overlay"></div><div class="sidebar-intrude"><div class="sidebar-avatar"><img src="//julydate-1251438221.file.myqcloud.com/img/head.jpg" srcset="//julydate-1251438221.file.myqcloud.com/img/head.jpg" alt="avatar"></div><div class="text-center sidebar-about"><p class="h3 sidebar-author">七夏浅笑</p><p class="sidebar-subtitle">七月之约，夏末浅笑<script type="text/javascript">console.log("博主认证: https://bbs.liyuans.com")</script></p><a href="https://github.com/julydate" class="h4" target="_blank"><i class="fab fa-github" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="https://twitter.com/julydate" class="h4" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="https://live.bilibili.com/22628687" class="h4" target="_blank"><i class="fab fa-youtube" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="mailto:i@xhtml.love" class="h4" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i> </a>&nbsp;&nbsp;</div><div class="sidebar-friend"><p class="h6 sidebar-friend-title"><span class="sidebar-label-left"><i class="fas fa-user-friends"></i></span> <span class="sidebar-label">友情链接</span></p><ul class="list-group"><a href="/links/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 其余友链在内页</li></a><a href="https://xiaopc.org/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; xiaopc</li></a><a href="https://webdoger.me/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 孔壕</li></a><a href="https://diygod.me/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; DIYgod</li></a><a href="https://www.chinuno.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 兔兔</li></a><a href="https://tea9.xyz/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 茶姐姐</li></a><a href="https://qianling.pw/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 千灵夙赋</li></a><a href="https://moegod.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 月宅</li></a><a href="https://www.xytsing.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 咸鱼滩音乐团队</li></a><a href="https://hitokoto.cn/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 一言</li></a><a href="https://blog.naixi.net/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 奶昔</li></a></ul></div></div></div><a class="z-depth-1" id="scroll-top-button" href="#" role="button"><i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><div id="footerContent" class="rgba-black-slight"><footer class="pt-5"><div class="text-center py-3"><div class="footer-theme"><a href="https://hexo.io" target="_blank" rel="nofollow noopener noreferrer">Hexo</a> theme <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener noreferrer">Fluid</a> mod by <a href="https://github.com/qixa/hexo-theme-fluid-mod" target="_blank" rel="nofollow noopener noreferrer">Julydate</a></div><div class="footer-copyright">©2026&nbsp;七夏浅笑 <i class="iconfont icon-love"></i> <span>萌萌哒<span id="runtime"></span>天啦</span></div><div class="footer-hitokoto"><a id="hitokotoa" href="#" target="_blank" rel="nofollow noopener noreferrer"><span id="hitokoto"></span></a></div></div></footer></div><script src="/lib/popper/popper.min.js"></script><script src="/lib/bootstrap/js/bootstrap.min.js"></script><script src="/lib/mdbootstrap/js/mdb.min.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script src="/lib/tocbot/tocbot.min.js"></script><script src="/js/post.js"></script><script src="/lib/prettify/prettify.min.js"></script><script type="text/javascript">$(document).ready((function(){$("pre").addClass("prettyprint  linenums"),prettyPrint()}))</script><script src="/lib/typed/typed.min.js"></script><script type="text/javascript">var typed=new Typed("#subtitle",{strings:["  ","使用 acme.sh 申请 Google Cloud SSL 证书&nbsp;"],cursorChar:"_",typeSpeed:70,loop:!1});typed.stop(),$(document).ready((function(){$(".typed-cursor").addClass("h2"),typed.start()}))</script><script src="/lib/anchor/anchor.min.js"></script><script type="text/javascript">anchors.options={placement:"right",visible:"hover"};var el="h1,h2,h3,h4,h5,h6".split(","),res=[];for(item of el)res.push(".markdown-body > "+item);anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script type="text/javascript">var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){getSearchFile(path),this.onclick=null}</script><script src="/lib/fancybox/jquery.fancybox.min.js"></script><script type="text/javascript">var setupFancybox=function(){$("#post img:not(.no-zoom img, img[no-zoom])").each((function(){var t=document.createElement("a");$(t).attr("data-fancybox","gallery"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)}))};setupFancybox()</script><script type="text/javascript">function hitokoto(o){$("#hitokoto").stop().fadeOut((function(){$("#hitokoto").html(o.hitokoto),document.getElementById("hitokotoa").href="https://hitokoto.cn/?uuid="+o.uuid,$("#hitokoto").stop().fadeIn()}))}function getHitokoto(){var o=["a","b","c","d","e","i"];fetch("https://v1.hitokoto.cn/?encode=json&charset=utf-8&c="+o[Math.floor(Math.random()*o.length)],{cache:"no-cache",method:"GET",mode:"cors"}).then(o=>o.json()).then(o=>{hitokoto(o),setTimeout(getHitokoto,1e4)}).catch(console.error)}$(document).ready((function(){getHitokoto()}))</script><script type="text/javascript">$("#background").removeClass("banner-bg"),$("body").addClass("banner-bg");var postToTopHight=$("#board").offset().top;$(window).scroll((function(){document.body.scrollTop+document.documentElement.scrollTop>=postToTopHight?($("#background").removeClass("rgba-black-slight"),$("#mainContent").removeClass("rgba-black-slight"),$("#footerContent").removeClass("rgba-black-slight")):($("#background").addClass("rgba-black-slight"),$("#mainContent").addClass("rgba-black-slight"),$("#footerContent").addClass("rgba-black-slight"))}))</script><script type="text/javascript">var blogRunTime=function(){var e=document.getElementById("runtime"),n=new Date("2015,04,20"),t=(new Date).getTime()-n.getTime(),i=Math.floor(t/864e5);e.innerHTML=i};$(document).ready((function(){blogRunTime()}))</script><script type="text/javascript">var originalTitle=document.title;window.onblur=function(){document.title="你不爱我了QAQ"},window.onfocus=function(){document.title=originalTitle}</script><script type="text/javascript">var jumpComments=function(){if(window.location.hash){var n=decodeURI(window.location.hash);if(!$(n).length)var o=setInterval((function(){$(n).length&&(clearInterval(o),setTimeout((function(){$("html, body").animate({scrollTop:$(n).offset().top-90},1e3)}),1500))}),100)}};$(document).ready((function(){jumpComments()}))</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-150991779-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-150991779-1")</script></body></html>