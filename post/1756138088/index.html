<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/favicon.ico"><link rel="icon" type="image/png" href="/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="author" content="七夏浅笑"><meta name="description" content="本文为 hexo 博客访问优化下篇，主要介绍了使用腾讯云对象存储来加速博客静态资源的访问的方法，上篇主讲选用合适的国内外 CDN 来加速 hexo 博客全局访问速度，两篇文章均是在没有备案域名的前提下进行的 。"><meta name="keywords" content="笔记,"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><title>hexo博客访问优化-COS使用 - 七夏浅笑</title><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"><link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css"><link rel="stylesheet" href="/lib/prettify/tranquil-heart.min.css"><link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"><link rel="stylesheet" href="/css/main.css"><script src="/lib/jquery/jquery.min.js"></script><style type="text/css">.banner-bg{background-image:url(//julydate-1251438221.file.myqcloud.com/img/bg.jpg);background-position:center;background-repeat:repeat-y;background-size:cover;background-attachment:fixed}</style><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="七夏浅笑" type="application/atom+xml">
</head><body class="banner-bg"><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>七夏浅笑</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/">主页</a></li><li class="nav-item"><a class="nav-link" href="/archives/">归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/">分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li><li class="nav-item"><a class="nav-link" href="/links/">友链</a></li><li class="nav-item"><a class="nav-link" href="/about/">关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i class="iconfont icon-search"></i>&nbsp;&nbsp;</a></li></ul></div></div></nav><div class="view intro-2 rgba-black-slight" id="background"><div class="full-bg-img"><div class="mask flex-center"><div class="container text-center white-text fadeInUp"><span class="h2" id="subtitle"></span><br><p class="mt-3"><i class="far fa-calendar-alt"></i> <span class="post-date">2019-11-08&nbsp;|&nbsp;</span> <i class="far fa-chart-bar"></i> <span class="post-count">3k</span>字&nbsp;|&nbsp; <i class="far fa-clock"></i> <span class="post-count">11</span>分钟</p></div></div></div></div></header><main id="mainContent" class="rgba-black-slight"><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="py-5 z-depth-3" id="board"><div class="post-content mx-auto" id="post"><div class="markdown-body"><p>本文为 hexo 博客访问优化下篇，主要介绍了使用腾讯云对象存储来加速博客静态资源的访问的方法，上篇主讲选用合适的国内外 CDN 来加速 hexo 博客全局访问速度，两篇文章均是在<strong>没有备案域名</strong>的前提下进行的 。</p><span id="more"></span><p>上篇：<a href="/post/60859300/">hexo博客访问优化-CDN选用</a></p><p>下篇：<a href="#">hexo博客访问优化-COS使用</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文主要是介绍使用腾讯云对象存储来加速 hexo 网站访问的方法，但本文所提到的插件 <a target="_blank" href="https://github.com/julydate/hexo-static-cos" rel="external nofollow noreferrer noopener">hexo-static-cos</a> 适用于所有类似于对象存储的云服务提供商，只要能够存储网站镜像都可以用来加速，包括但不限于自建服务器、CDN、jsDelivr 镜像等，详细情况请看下文介绍。</p><p>先复制粘贴个对象存储的介绍吧。</p><blockquote><p><strong>对象存储</strong>，也称为基于对象的存储，是一种数据存储，其中每个数据单元存储为称为对象的离散单元。对象可以是离散单元，类似于pdf，音频，图像或视频文件。这些对象实际上可以是任何类型的数据和任何大小的数据。</p></blockquote><p>其实就是弄个类似云盘的东西来当你的图床，顺便存一些其它的静态文件。</p><p>然后看看国内各个云服务厂商关于对象存储和 CDN 的免费活动和收费情况（大部分数据来自《<a target="_blank" href="https://blog.mimvp.com/article/28407.html" rel="external nofollow noreferrer noopener">米扑博客调研一览表（2018-09-16）</a>》，自己整理收集了一小部分）</p><table><thead><tr><th>服务商</th><th>云存储</th><th></th><th align="left"></th><th>CDN</th><th></th><th></th></tr></thead><tbody><tr><td>名称</td><td>免费空间</td><td>收费价格</td><td align="left">备注</td><td>免费流量</td><td>收费价格</td><td>备注</td></tr><tr><td><a target="_blank" href="https://www.qiniu.com/prices?source=kodo" rel="external nofollow noreferrer noopener">七牛云</a></td><td>10GB</td><td>0.148元/GB/月</td><td align="left">标准存储免费10GB/月</td><td>10GB/月</td><td>HTTP 0.24元/GB &amp; HTTPS 0.28元/GB</td><td>HTTP 免费/HTTPS 收费</td></tr><tr><td><a target="_blank" href="https://www.upyun.com/league" rel="external nofollow noreferrer noopener">又拍云</a></td><td>10GB</td><td>0.129元/GB/月</td><td align="left">标准存储免费10GB/月，需要挂官方 logo</td><td>15GB/月</td><td>0.29元/GB</td><td>HTTP/HTTS均免费，需要挂官方 logo</td></tr><tr><td><a target="_blank" href="https://cloud.tencent.com/document/product/436/6240" rel="external nofollow noreferrer noopener">腾讯云</a></td><td>50GB</td><td>0.130元/GB/月</td><td align="left">标准存储免费50GB/月，开通后免费六个月</td><td>10GB/月</td><td>0.21元/GB</td><td>HTTP/HTTS均免费，开通后免费六个月</td></tr><tr><td><a target="_blank" href="https://www.aliyun.com/price/product#/oss/detail" rel="external nofollow noreferrer noopener">阿里云</a></td><td>5GB</td><td>0.120元/GB/月</td><td align="left">5GB免费仅限香港和海外区</td><td>无</td><td>0.24元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://www.163yun.com/help/documents/76809994847309824" rel="external nofollow noreferrer noopener">网易云</a></td><td>50GB</td><td>0.123元/GB/月</td><td align="left">标准和低频存储均免费，个人用户实名通道暂时关闭</td><td>无</td><td>0.23元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://www.qingcloud.com/pricing-standard" rel="external nofollow noreferrer noopener">青云</a></td><td>10GB</td><td>0.147元/GB/月</td><td align="left">标准和低频存储均免费</td><td>无</td><td>0.23元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://www.ucloud.cn/site/product/ufile.html" rel="external nofollow noreferrer noopener">Ucloud</a></td><td>20GB</td><td>0.156元/GB/月</td><td align="left">标准和低频存储均免费</td><td>无</td><td>0.34元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://cloud.baidu.com/doc/BOS/Pricing.html" rel="external nofollow noreferrer noopener">百度智能云</a></td><td>无</td><td>0.119元/GB/月</td><td align="left">无免费</td><td>无</td><td>0.20元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://www.huaweicloud.com/pricing.html#/obs" rel="external nofollow noreferrer noopener">华为云</a></td><td>无</td><td>0.120元/GB/月</td><td align="left">无免费</td><td>无</td><td>0.20元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://www.jdcloud.com/help/detail/1144/isCatalog/1" rel="external nofollow noreferrer noopener">京东云</a></td><td>无</td><td>0.128元/GB/月</td><td align="left">无免费</td><td>无</td><td>0.35元/GB</td><td>无免费</td></tr><tr><td><a target="_blank" href="https://www.zzidc.com/storage/kystorageindex" rel="external nofollow noreferrer noopener">景安云</a></td><td>无</td><td>0.150元/GB/月</td><td align="left">无免费</td><td>10GB/天</td><td>0.30元/GB</td><td>HTTP 免费</td></tr><tr><td><a target="_blank" href="https://www.didiyun.com/production/s3.html#charge" rel="external nofollow noreferrer noopener">滴滴云</a></td><td>无</td><td>0.125元/GB/月</td><td align="left">无免费</td><td>无</td><td>无</td><td>无</td></tr><tr><td><a target="_blank" href="https://www.maoyuncloud.com/product/mos" rel="external nofollow noreferrer noopener">猫云</a></td><td>20GB</td><td>0.100元/GB/月</td><td align="left">标准存储免费20GB/月，需要挂官方 logo</td><td>30G</td><td>0.23元/GB</td><td>HTTP/HTTS均免费，需要挂官方 logo</td></tr><tr><td><a target="_blank" href="https://www.ctyun.cn/product/oos1" rel="external nofollow noreferrer noopener">天翼云</a></td><td>无</td><td>0.250元/GB/月</td><td align="left">无免费</td><td>无</td><td>0.22元/GB</td><td>无免费</td></tr></tbody></table><p>其中能<strong>不备案</strong>使用<strong>官方提供的域名</strong>进行“对象存储 + CDN”加速的有百度智能云、腾讯云、阿里云和 UCloud，其中阿里云的对象存储的官方加速服务和 CDN 服务是独立的，收费也比较贵，其余大部分服务商即使官方不提供域名进行 CDN 组合加速的，默认提供的对象存储的域名也是能直接使用的（虽然没有 CDN 加速但是因为服务器在国内，大部分区域访问速度也不错）。</p><p>然后最近很多家都在做双十一的活动（腾讯云有一元钱的礼包哦），这里只列出上面能使用 CDN 组合加速的几家</p><p>百度智能云：<a target="_blank" href="https://cloud.baidu.com/campaign/Promotion-20191111/index.html" rel="external nofollow noreferrer noopener">https://cloud.baidu.com/campaign/Promotion-20191111/index.html</a></p><p>腾讯云：<a target="_blank" href="https://cloud.tencent.com/act/pro/cos" rel="external nofollow noreferrer noopener">https://cloud.tencent.com/act/pro/cos</a></p><p>UCloud：<a target="_blank" href="https://www.ucloud.cn/site/active/cdn-ufile.html" rel="external nofollow noreferrer noopener">https://www.ucloud.cn/site/active/cdn-ufile.html</a></p><p>阿里云：<a target="_blank" href="https://www.aliyun.com/1111/2019/products#module-6372043750" rel="external nofollow noreferrer noopener">https://www.aliyun.com/1111/2019/products#module-6372043750</a></p><h3 id="2022-年-4-月-13-日更新"><a href="#2022-年-4-月-13-日更新" class="headerlink" title="2022 年 4 月 13 日更新"></a>2022 年 4 月 13 日更新</h3><p><strong>腾讯云</strong>自 2022 年 5 月 9 日起<strong>不再支持</strong>新增<strong>官方</strong>提供的<strong>域名</strong>对对象存储使用 <strong>CDN 加速</strong>。</p><blockquote><p>域名形如<bucketname-appid>.file.myqcloud.com</bucketname-appid></p></blockquote><p>但是<strong>已经添加过的</strong>和正在使用域名暂时<strong>不受影响</strong>。</p><p>具体查看：《<a target="_blank" href="https://cloud.tencent.com/document/product/436/67767" rel="external nofollow noreferrer noopener">关于 COS 不再支持新增默认 CDN 加速域名的通知</a>》</p><p>近年来中国大陆境内互联网的审查越来越严格，对于对象存储的内容管控确实也比较敏感，上述其他几家剩余百度智能云和阿里云还可以使用官方提供的域名进行 CDN 加速（阿里云定价是真的贵诶），UCloud 当前虽然有设置的选项但是已经不能开启，尽管希望能继续使用这些服务，不过长远来看有可能会变成全部都需要自己绑定备案域名的局面，所以如果有正规业务的话还是提早准备一个备案域名用来加速图片与文档等静态文件吧，连可怜的 jsDelivr 也被赶走了，真可惜。</p><h2 id="COS-配置"><a href="#COS-配置" class="headerlink" title="COS 配置"></a>COS 配置</h2><p>这里只讲腾讯云对象存储和 CDN 的配置方法，其它云服务厂商大致相同。</p><p>购买就不说啦，首先创建存储桶，区域主要看你前面所购买的存储包的位置（每个区域收费都不一样，参见<a target="_blank" href="https://buy.cloud.tencent.com/price/cos" rel="external nofollow noreferrer noopener">产品定价</a>），由于后面我要使用 CDN 而且要开启鉴权这里就选择私有读写啦，有的厂商 CDN 不能单独设置鉴权，所以这里建议一般还是选择<strong>公有读私有写</strong>哦。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112210241327.png" srcset="/img/loading.gif" alt="image-20191112210241327"></p><p>创建好过后就可以开始设置存储桶了，打开基础设置，找到跨域访问CORS设置，添加上你网站域名；找到回源设置，这里填你网站的域名如<code>www.example.com</code>或<code>example.github.io</code>（这里有一个问题就是腾讯云没文件经常回源失败直接返回 404，所以后面我们还是要手动上传同步一下）。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112213118056.png" srcset="/img/loading.gif" alt="image-20191112213118056"></p><p>然后到啦最重要的步骤，打开域名管理，编辑默认加速域名保持如下默认选项即可（但是如果你前面和我一样选的私有读写的话，这里需要点一下添加 CDN 服务授权，然后开启回源鉴权）。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112215450319.png" srcset="/img/loading.gif" alt="image-20191112215450319"></p><p>然后<strong>加速域名</strong><code>hanabi-1251438221.file.myqcloud.com</code>就是你后面插件里面需要用到的域名了，默认已经帮你配置好了 https（UCloud 的话默认没有 https，需要自己申请证书添加，申请证书的域名验证方式选文件验证就行）。</p><p>接着我们打开 CDN 控制台的域名管理进行进一步配置，等待部署完成过后，点击管理打开域名的详细配置界面，打开访问控制，因为我们加速的全是静态资源，所以建议把过滤参数打开，防盗链也建议设置一下白名单为自己网站的域名，IP访问限频的话看情况开启，主要是防御CC。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112223443939.png" srcset="/img/loading.gif" alt="image-20191112223443939"></p><p>打开缓存设置，因为我们主要缓存图片等静态资源，所以可以把时间设置长一点，减少回源流量的开销，我这里设置了一个月，分资源设置的话请看文档（比如你想单独设置 css 和 js 文件只缓存一天）。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112223738245.png" srcset="/img/loading.gif" alt="image-20191112223738245"></p><blockquote><p>到这里设置就基本结束啦，如果你前面设置的是<strong>公有读私有写</strong>的话，可以直接去看下一部分 <a href="#COS-%E4%BD%BF%E7%94%A8">COS 使用</a></p></blockquote><p>如果你和我一样设置的是私有读写的话，请继续看。这里说一下下我为什么要开鉴权，因为 COS 直接回源的话相当于你源站的一个镜像站了，直接打开能进行访问的，我担心会分走我博客的权重被搜索引擎错误收录，所以开启了鉴权（只允许直接访问图片和 css 等静态文件，禁止访问 html），腾讯云这里 CDN 鉴权是单独设置的，有的厂商（比如百度智能云和 UCloud）的鉴权只能在对象存储的控制台设置，就在那边进行相关的设置吧，一般是在对象存储控制台的“Policy权限设置”里面，添加指定策略即可。</p><p>好的我们打开 CDN 控制台的安全配置，里面有一个鉴权配置，点击打开，模式随便选一个，秘钥和有效时间随便填一个，鉴权对象选择指定文件类型不鉴权，建议添加以下静态资源项目，或者你也可以选择指定文件类型鉴权，然后只填写<code>.html;.htm</code></p><pre><code class="xml">.jpg;.png;.jpeg;.gif;.webp;.bmp;.ico;.svg;.icon;.tga;.imb;.js;.css;.json;.txt;.md;.csv;.xml;.log;.conf;.vue;.ttf;.otf;.woff;.woff2;.eot;.sfnt;.mp3;.mp4;.avi;.mpeg;.rm;.ra;.ogg;.wav;.wmv;.rmi;.aac;.rmvb;.mkv;.flv;.swf;.mov;.movie;.map
</code></pre><p>添加完后效果如下</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112230511267.png" srcset="/img/loading.gif" alt="image-20191112230511267"></p><h2 id="COS-使用"><a href="#COS-使用" class="headerlink" title="COS 使用"></a>COS 使用</h2><p>首先文件管理推荐使用官方的<a target="_blank" href="https://cloud.tencent.com/document/product/436/11366" rel="external nofollow noreferrer noopener">客户端</a>，操作方便，登陆方式等详情见官方文档。你还可以像下面这样设置同步文件夹，不过如果你设置了回源域名的话一般没有的资源都会自动镜像源站，回源失败的时候才需要手动上传或同步。</p><p><img src="//julydate-1251438221.file.myqcloud.com/assets/img/image-20191112231241886.png" srcset="/img/loading.gif" alt="image-20191112231241886"></p><p>然后我们打开本地 hexo 的目录安装插件 <a target="_blank" href="https://github.com/julydate/hexo-static-cos" rel="external nofollow noreferrer noopener">hexo-static-cos</a></p><pre><code class="bash">npm install hexo-static-cos --save
</code></pre><p>打开 hexo 配置文件<code>_config.yml</code>添加以下内容</p><pre><code class="yaml"># qcloudcos
qcloudcos:
  enable: true # 是否开启对象储存
  domain: usersubject.file.myqcloud.com # 对象储存或 CDN 域名，无需填写 http/https
  onlypost: false # 是否只替换文章内资源
  priority: 10 # 插件执行优先级，数值越小越先执行，默认为 10
  img: true # 是否替换 html img 标签，下列项目同理
  link: true
  script: true
  audio: false
  video: false
  source: false
  track: false
  area: false
</code></pre><p>其中 domain 改为前文提到的加速域名<code>hanabi-1251438221.file.myqcloud.com</code>，如果你只想加速文章内的图片就把<code>onlypost</code>设置为<code>true</code>，下面的<code>img</code>也设置为<code>true</code>，如果你还需要加速博客内的 css 和 js，则需要把<code>onlypost</code>设置为<code>false</code>，下面的<code>img link script</code>也设置为<code>true</code>，其他的以此类推，根据需要开启，然后你博客内的对应静态资源链接就会在<code>hexo g</code>时自动生成为腾讯云对象存储的地址了</p><blockquote><p>其实还可以直接使用 jsDelivr 来充当加速域名，具体可以看看这位敲厉害的大佬的博客哦《<a target="_blank" href="https://chanshiyu.com/#/post/94" rel="external nofollow noreferrer noopener">JsDelivr 全站托管</a>》，我也是看了过后才知道居然还可以这样诶，不过感觉白嫖 jsDelivr 有点太无情啦哈哈</p></blockquote><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>使用本文方法和插件有一个前提，你文章内的图片资源地址必须是相对于博客根目录的链接，比如你在博客 markdown 文件内引用图片的格式为</p><pre><code class="markdown">![example](/assets/img/example.jpg)
</code></pre><p>或者如果你启用了 hexo 的 post_asset_folder 功能的话你的图片引用格式应该为</p><pre><code class="swig">&#123;% asset_img example.jpg This is an example image %&#125;
</code></pre><p>如果为以下几种格式时必须安装 <a target="_blank" href="https://github.com/xcodebuild/hexo-asset-image" rel="external nofollow noreferrer noopener">hexo-asset-image</a> 插件且将本插件的 priority 设置为 11</p><pre><code class="markdown">![example](example.jpg)
![example](postName/example.jpg)
![example](/postName/example.jpg)
</code></pre><p>另外如果你要替换 css 和 js 等静态资源那你博客主题内引用静态资源的链接也必须是相对于博客根目录的（一般主题都是这样）</p><p>到这里节结束啦，博客的配置比较简单，而关于对象存储和 CDN 的更多详细设置请多多阅读对应的官方文档，如腾讯云的《<a target="_blank" href="https://cloud.tencent.com/document/product/436/11365" rel="external nofollow noreferrer noopener">对象存储-控制台指南</a>》和《<a target="_blank" href="https://cloud.tencent.com/document/product/228/6288" rel="external nofollow noreferrer noopener">内容分发网络-用户指南</a>》</p><p>附件 - 对象存储调研一览表：<a href="/assets/file/objectStorage.xlsx">objectStorage.xlsx</a></p><hr></div><br><div><div id="post-tag"><span><i class="iconfont icon-inbox"></i> <a class="hover-with-bg" href="/categories/%E7%A8%8B%E5%BA%8F">程序</a> &nbsp; </span><span><i class="iconfont icon-tag"></i> <a class="hover-with-bg" href="/tags/%E7%AC%94%E8%AE%B0">笔记</a></span></div><div id="post-note"><div><strong>本文作者：</strong><a href="/">七夏浅笑</a></div><div><strong>本文链接：</strong><a href="https://www.julydate.com/post/1756138088/">https://www.julydate.com/post/1756138088/</a></div><div><strong>版权声明：</strong>本站文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0/deed.zh" rel="nofollow noopener noopener">CC BY-NC-SA 3.0 CN</a> 协议进行许可</div></div><div id="post-nav" class="container"><div class="row"><a href="/post/1907789401/" id="post-nav-prev" class="col"><i class="fas fa-arrow-left"></i> <span class="post-nav-title">PacificRack VPS 测试报告</span> </a><a href="/post/60859300/" id="post-nav-next" class="col"><span class="post-nav-title">hexo博客访问优化-CDN选用</span> <i class="fas fa-arrow-right"></i></a></div></div></div></div><div class="col-lg-10 mx-auto nopadding-md"><div class="comments mx-auto" id="comments"><br><br><link rel="stylesheet" href="/lib/waline/2.15.6/waline.min.css"><style type="text/css">.wl-[data-class=wl-] .wl-content>p>a:not(.at){overflow-wrap:anywhere;display:inline}</style><div id="vcomments" style="margin:0 auto"></div><script defer src="/lib/waline/2.15.6/waline.min.js"></script><script>var notify=!1,verify=!1,oldLoad=window.onload;window.onload=function(){function e(e){const t=new FormData;return t.append("image",e),t.append("apiType","catbox"),t.append("token","146faa57355f01c8eed8a045eda6a684"),fetch("//www.hualigs.cn/api/upload",{method:"POST",mode:"cors",body:t}).then(e=>e.json()).then((function(e){const t=new RegExp("^[a-zA-z]+://[^s]*");let a=e.data.url.catbox;return t.test(a)?a:e.data.url[2]}))}Waline.init({el:"#vcomments",serverURL:"https://waline.julydate.com",meta:["nick","mail","link"],pageSize:"10",emoji:["https://www.julydate.com/waline-emojis/alus","https://www.julydate.com/waline-emojis/qq","https://www.julydate.com/waline-emojis/bilibili"],locale:{placeholder:"说点什么吧quq",uploading:"上传中...默认图床在境内可能无法访问"},imageUploader:function(t){return function(t){const a=new FormData;return a.append("smfile",t),a.append("format","json"),fetch("https://smms.xhtml.love/upload",{method:"POST",mode:"cors",headers:new Headers({Authorization:"FNnpntzeJnw1SQc61jL6Tt1UZPzmhLBT"}),body:a}).then(e=>e.json()).then((function(a){const n=new RegExp("^[a-zA-z]+://[^s]*");let o="image_repeated"==a.code?a.images:a.data.url?a.data.url:"";return n.test(o)?o:e(t)})).catch((function(a){return e(t)}))}(t)}}),oldLoad&&oldLoad()}</script><noscript>Please enable JavaScript to view the <a target="_blank" href="https://waline.js.org" rel="nofollow noopener noopener">comments powered by Waline.</a></noscript></div></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container"><div id="toc"><p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p><div id="tocbot"></div></div></div></div></div></main><div id="sidebar" class="sidebar-hide"><span class="sidebar-button sidebar-button-shift" id="toggle-sidebar"><i class="fa fa-arrow-right on" aria-hidden="true"></i></span><div class="sidebar-overlay"></div><div class="sidebar-intrude"><div class="sidebar-avatar"><img src="//julydate-1251438221.file.myqcloud.com/img/head.jpg" srcset="//julydate-1251438221.file.myqcloud.com/img/head.jpg" alt="avatar"></div><div class="text-center sidebar-about"><p class="h3 sidebar-author">七夏浅笑</p><p class="sidebar-subtitle">七月之约，夏末浅笑<script type="text/javascript">console.log("博主认证: https://bbs.liyuans.com")</script></p><a href="https://github.com/julydate" class="h4" target="_blank"><i class="fab fa-github" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="https://twitter.com/julydate" class="h4" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="https://live.bilibili.com/22628687" class="h4" target="_blank"><i class="fab fa-youtube" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="mailto:i@xhtml.love" class="h4" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i> </a>&nbsp;&nbsp;</div><div class="sidebar-friend"><p class="h6 sidebar-friend-title"><span class="sidebar-label-left"><i class="fas fa-user-friends"></i></span> <span class="sidebar-label">友情链接</span></p><ul class="list-group"><a href="/links/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 其余友链在内页</li></a><a href="https://xiaopc.org/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; xiaopc</li></a><a href="https://webdoger.me/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 孔壕</li></a><a href="https://diygod.me/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; DIYgod</li></a><a href="https://www.chinuno.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 兔兔</li></a><a href="https://tea9.xyz/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 茶姐姐</li></a><a href="https://qianling.pw/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 千灵夙赋</li></a><a href="https://moegod.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 月宅</li></a><a href="https://www.xytsing.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 咸鱼滩音乐团队</li></a><a href="https://hitokoto.cn/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 一言</li></a><a href="https://blog.naixi.net/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; 奶昔</li></a></ul></div></div></div><a class="z-depth-1" id="scroll-top-button" href="#" role="button"><i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><div id="footerContent" class="rgba-black-slight"><footer class="pt-5"><div class="text-center py-3"><div class="footer-theme"><a href="https://hexo.io" target="_blank" rel="nofollow noopener noreferrer">Hexo</a> theme <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener noreferrer">Fluid</a> mod by <a href="https://github.com/qixa/hexo-theme-fluid-mod" target="_blank" rel="nofollow noopener noreferrer">Julydate</a></div><div class="footer-copyright">©2025&nbsp;七夏浅笑 <i class="iconfont icon-love"></i> <span>萌萌哒<span id="runtime"></span>天啦</span></div><div class="footer-hitokoto"><a id="hitokotoa" href="#" target="_blank" rel="nofollow noopener noreferrer"><span id="hitokoto"></span></a></div></div></footer></div><script src="/lib/popper/popper.min.js"></script><script src="/lib/bootstrap/js/bootstrap.min.js"></script><script src="/lib/mdbootstrap/js/mdb.min.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script src="/lib/tocbot/tocbot.min.js"></script><script src="/js/post.js"></script><script src="/lib/prettify/prettify.min.js"></script><script type="text/javascript">$(document).ready((function(){$("pre").addClass("prettyprint  linenums"),prettyPrint()}))</script><script src="/lib/typed/typed.min.js"></script><script type="text/javascript">var typed=new Typed("#subtitle",{strings:["  ","hexo博客访问优化-COS使用&nbsp;"],cursorChar:"_",typeSpeed:70,loop:!1});typed.stop(),$(document).ready((function(){$(".typed-cursor").addClass("h2"),typed.start()}))</script><script src="/lib/anchor/anchor.min.js"></script><script type="text/javascript">anchors.options={placement:"right",visible:"hover"};var el="h1,h2,h3,h4,h5,h6".split(","),res=[];for(item of el)res.push(".markdown-body > "+item);anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script type="text/javascript">var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){getSearchFile(path),this.onclick=null}</script><script src="/lib/fancybox/jquery.fancybox.min.js"></script><script type="text/javascript">var setupFancybox=function(){$("#post img:not(.no-zoom img, img[no-zoom])").each((function(){var t=document.createElement("a");$(t).attr("data-fancybox","gallery"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)}))};setupFancybox()</script><script type="text/javascript">function hitokoto(o){$("#hitokoto").stop().fadeOut((function(){$("#hitokoto").html(o.hitokoto),document.getElementById("hitokotoa").href="https://hitokoto.cn/?uuid="+o.uuid,$("#hitokoto").stop().fadeIn()}))}function getHitokoto(){var o=["a","b","c","d","e","i"];fetch("https://v1.hitokoto.cn/?encode=json&charset=utf-8&c="+o[Math.floor(Math.random()*o.length)],{cache:"no-cache",method:"GET",mode:"cors"}).then(o=>o.json()).then(o=>{hitokoto(o),setTimeout(getHitokoto,1e4)}).catch(console.error)}$(document).ready((function(){getHitokoto()}))</script><script type="text/javascript">$("#background").removeClass("banner-bg"),$("body").addClass("banner-bg");var postToTopHight=$("#board").offset().top;$(window).scroll((function(){document.body.scrollTop+document.documentElement.scrollTop>=postToTopHight?($("#background").removeClass("rgba-black-slight"),$("#mainContent").removeClass("rgba-black-slight"),$("#footerContent").removeClass("rgba-black-slight")):($("#background").addClass("rgba-black-slight"),$("#mainContent").addClass("rgba-black-slight"),$("#footerContent").addClass("rgba-black-slight"))}))</script><script type="text/javascript">var blogRunTime=function(){var e=document.getElementById("runtime"),n=new Date("2015,04,20"),t=(new Date).getTime()-n.getTime(),i=Math.floor(t/864e5);e.innerHTML=i};$(document).ready((function(){blogRunTime()}))</script><script type="text/javascript">var originalTitle=document.title;window.onblur=function(){document.title="你不爱我了QAQ"},window.onfocus=function(){document.title=originalTitle}</script><script type="text/javascript">var jumpComments=function(){if(window.location.hash){var n=decodeURI(window.location.hash);if(!$(n).length)var o=setInterval((function(){$(n).length&&(clearInterval(o),setTimeout((function(){$("html, body").animate({scrollTop:$(n).offset().top-90},1e3)}),1500))}),100)}};$(document).ready((function(){jumpComments()}))</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-150991779-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-150991779-1")</script></body></html>